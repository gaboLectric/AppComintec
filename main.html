<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comintec - Panel de Control</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
  <!--
    SECCIÓN DE NAVEGACIÓN:
    Aunque la navegación en sí no requiere acceso directo a la BD, algunos elementos como el perfil de usuario o notificaciones podrían cargar información de la BD.
  -->
  <!-- Barra de navegación -->
  <nav class="navbar">
    <div class="container navbar-container">
      <div class="navbar-logo">
        <div class="navbar-logo-img"></div>
        <span>Comintec</span>
      </div>
      
      <!--
        MENÚ DE NAVEGACIÓN:
        Los elementos del menú pueden ser estáticos, pero las opciones dentro de los dropdowns podrían potencialmente cargarse o depender de permisos de usuario obtenidos de la BD.
      -->
      <div class="nav-menu" id="navMenu">
        <!-- Primera fila de navegación -->
        <div class="nav-menu-row">
          <a href="index.html" class="nav-item active">
            <i class="fas fa-tachometer-alt"></i> Panel de Control
          </a>
          
          <div class="nav-dropdown">
            <a href="#" class="nav-item">
              <i class="fas fa-chart-bar"></i> Ventas <i class="fas fa-chevron-down"></i>
              <!--
                SECCIÓN DE VENTAS: Los elementos dentro de este dropdown podrían enlazar a páginas que interactúan fuertemente con la BD para listar clientes, productos, cotizaciones, etc.
              -->
            </a>
            <div class="nav-dropdown-menu">
              <a href="#" class="nav-dropdown-item">Agregar Cliente</a>
              <a href="#" class="nav-dropdown-item">Mis Clientes</a>
              <a href="#" class="nav-dropdown-item">Borrador de Cotización</a>
              <a href="#" class="nav-dropdown-item">Existencias de Productos</a>
              <a href="#" class="nav-dropdown-item">Asignación de Clientes</a>
              <a href="#" class="nav-dropdown-item">Fichas Técnicas</a>
            </div>
          </div>
          
          <!-- SECCIÓN DE INVENTARIO: Probablemente requiere leer y mostrar datos de productos, stock, etc. desde la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-box"></i> Inventario
          </a>
          
          <div class="nav-dropdown">
            <!--
              SECCIÓN DE ADMINISTRACIÓN: Los elementos dentro de este dropdown dirigen a funcionalidades que gestionan datos (solicitudes, contratos, etc.), interactuando con la BD para crear, leer, actualizar y eliminar registros.
              <CODE_BLOCK>
              // Ejemplo de cómo se podría interactuar con la BD desde un link:
              // window.location.href = `solicitud-material.html?userId=${currentUser.id}`; // Pasar ID de usuario obtenido de la BD</CODE_BLOCK>
            -->
            <a href="#" class="nav-item">
              <i class="fas fa-sliders-h"></i> Administración <i class="fas fa-chevron-down"></i>
            </a>
            <div class="nav-dropdown-menu">
              <a href="#" class="nav-dropdown-item">Solicitud de Viáticos</a>
              <a href="solicitud-material.html" class="nav-dropdown-item">Solicitud de Material</a>
              <a href="#" class="nav-dropdown-item">Solicitud de Tiempo</a>
              <a href="#" class="nav-dropdown-item">Solicitud de Paquetería</a>
              <a href="#" class="nav-dropdown-item">Asigna Número Fiscal</a>
              <a href="#" class="nav-dropdown-item">Mis Solicitudes</a>
              <a href="#" class="nav-dropdown-item">Contratos Repse</a>
            </div>
          </div>
          
          <!-- SECCIÓN DE COMPRAS: Similar a Inventario y Ventas, gestionaría datos de proveedores, pedidos, etc. en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-shopping-cart"></i> Compras
          </a>
          
          <!-- SECCIÓN DE SERVICIO: Podría gestionar tickets de servicio, historial, etc. en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-wrench"></i> Servicio
          </a>
          
          <!-- SECCIÓN DE METROLOGÍA: Gestionaría datos relacionados con calibraciones, equipos de medición, etc. en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-balance-scale"></i> Metrología
          </a>
        </div>
        
        <!-- Segunda fila de navegación -->
        <!--
          SEGUNDA FILA DEL MENÚ:
          Estos elementos también enlazarían a secciones con interacciones con la BD.
        -->
        <div class="nav-menu-row">
          <!-- SECCIÓN DE INFORMES: Requeriría leer y procesar grandes cantidades de datos de la BD para generar reportes. -->
          <a href="#" class="nav-item">
            <i class="fas fa-file-alt"></i> Informes
          </a>
          
          <!-- SECCIÓN DE SISTEMAS: Podría gestionar usuarios, permisos, configuraciones que se almacenan en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-laptop"></i> Sistemas
          </a>
          
          <!-- SECCIÓN DE MARKETING: Gestionaría campañas, leads, datos de clientes potenciales en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-bullhorn"></i> Marketing
          </a>
          
          <a href="#" class="nav-item">
            <i class="fas fa-check-circle"></i> Calidad
          </a>
          
          <!-- SECCIÓN DE CLIENTES: Gestión directa de la lista de clientes y sus detalles en la BD. -->
          <a href="#" class="nav-item">
            <i class="fas fa-users"></i> Clientes
          </a>
          
          <a href="#" class="nav-item">
            <i class="fas fa-cog"></i> Configuración
          </a>
        </div>
      </div>
      
      <!--
        MENÚ DE USUARIO Y NOTIFICACIONES:
        La información del usuario (nombre, rol) y las notificaciones/mensajes provendrían de la BD.
        También, las acciones de clic en los botones de notificación podrían desencadenar lectura de datos de la BD.
      -->
      <div class="user-menu">
        <div class="notifications">
          <button class="notification-btn">
            <i class="far fa-bell"></i>
          </button>
          <button class="notification-btn">
            <i class="far fa-envelope"></i>
          </button>
        </div>
        
        <div class="user-profile">
          <!--
            INFO DE USUARIO:
            La imagen, nombre y rol del usuario se cargarían idealmente desde la BD después del login.
          -->
          <div class="user-avatar">
            <img src="https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=100&h=100" alt="User profile">
          </div>
          <div class="user-info">
            <div class="user-name">Carlos Méndez</div>
            <div class="user-role">Administrador</div>
          </div>
        </div>
        
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main class="main-content">
    <!--
      CONTENIDO PRINCIPAL DEL PANEL DE CONTROL:
      Aquí es donde se mostrarán la mayoría de los datos obtenidos de la BD.
    -->
    <div class="container">
      <div class="dashboard-header">
        <h1 class="page-title">Panel de Control</h1>
        <!--
          CAMBIAR TEMA:
          Aunque no es directo a la BD, la preferencia del tema podría guardarse en la configuración del usuario en la BD.
        -->
        <button class="theme-toggle" id="themeToggle">
          <i class="fas fa-moon"></i>
        </button>
        <!--
          <CODE_BLOCK>
          // Placeholder para función que guarda preferencia de tema en BD
          function saveThemePreference(theme) {
            console.log(`Guardando preferencia de tema "${theme}" en la base de datos...`);
            // Aquí iría la llamada a la API o función de BD
            // Ejemplo: api.saveUserSettings({ theme: theme });
          }</CODE_BLOCK>
        -->
      </div>
      
      <!-- Sección de tarjetas stats -->
      <div class="grid grid-cols-2">
        <div class="card stats-card">
          <h4>Nuevos Clientes</h4>
          <p>5</p>
          <!--
            ESTADÍSTICAS:
            Estos números (Nuevos Clientes, Tareas Pendientes) deben ser cargados desde la BD al cargar la página.
          -->
          <!--
            <CODE_BLOCK>
            // Placeholder para función que carga estadísticas
            async function loadDashboardStats() {
              console.log("Cargando estadísticas del dashboard desde la base de datos...");
              // Aquí iría la llamada a la API para obtener los datos
              // const stats = await api.getDashboardStats();
              // Actualizar el DOM con los datos obtenidos
              // document.querySelector('.stats-card h4 + p').innerText = stats.newClients;
            }</CODE_BLOCK>
          -->
        </div>
        
        <div class="card stats-card">
          <h4>Tareas Pendientes</h4>
          <p>3</p>
        </div>
      </div>
      
      <!-- Calendario y Tareas -->
      <div class="grid grid-cols-3" style="margin-top: 20px;">
        <div class="card" style="grid-column: span 2;">
          <div class="card-header">
            <!--
              SECCIÓN CALENDARIO:
              Aunque la lógica del calendario (mostrar días, meses) es principalmente JavaScript,
              los *eventos* del calendario (si los hubiera) se cargarían desde la BD y se asociarían a fechas específicas.
              Actualmente no hay visualización de eventos en el HTML, pero si se añaden, requerirían BD.
            -->
            <h2 class="card-title">Calendario</h2>
            <div>Hoy es: <span id="currentDate">10 de mayo, 2025</span></div>
          </div>
          <div class="card-content">
            <div class="calendar-container">
              <div class="calendar-header">
                <div class="calendar-nav">
                  <button class="calendar-nav-btn" id="prevMonth">
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  <h3 class="calendar-month" id="currentMonth">Mayo 2025</h3>
                  <button class="calendar-nav-btn" id="nextMonth">
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>
              <div class="calendar-grid" id="calendarGrid">
                <!-- Días de la semana -->
                <div class="calendar-weekday">Dom</div>
                <div class="calendar-weekday">Lun</div>
                <div class="calendar-weekday">Mar</div>
                <div class="calendar-weekday">Mié</div>
                <div class="calendar-weekday">Jue</div>
                <div class="calendar-weekday">Vie</div>
                <div class="calendar-weekday">Sáb</div>
                
                <!-- Los días se generarán con JavaScript -->
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <!--
              SECCIÓN TAREAS:
              Esta sección interactúa directamente con la BD para:
              - Cargar la lista inicial de tareas (READ)
              - Añadir nuevas tareas (CREATE)
              - Marcar tareas como completadas (UPDATE)
              - Filtrar tareas (READ con filtros)
              - Eliminar tareas (DELETE) - aunque no hay botón de eliminar visible, es una operación común.
            -->

            <h2 class="card-title">Tareas</h2>
            <button class="task-filter-btn" id="taskFilterBtn">
              <i class="fas fa-filter"></i> <span id="taskFilterText">Ocultar completadas</span>
            </button>
          </div>
          <div class="card-content">
            <div class="task-list" id="taskList">
              <!-- Las tareas se generarán con JavaScript -->
            </div>
          </div>
          <div class="card-footer">
            <div class="task-input-group">
              <input type="text" class="task-input" id="newTaskInput" placeholder="Añadir nueva tarea...">
              <button class="task-add-btn" id="addTaskBtn">
                <i class="fas fa-plus"></i> Añadir
              </button>
            </div>
            <!--
              <CODE_BLOCK>
              // Placeholder para función que carga tareas
              async function loadTasks() {
                console.log("Cargando tareas desde la base de datos...");
                // const tasks = await api.getTasksForUser(currentUser.id);
                // Renderizar tareas en #taskList
              }

              // Placeholder para función que añade una tarea
              async function addTask(taskText) {
                console.log(`Añadiendo tarea "${taskText}" a la base de datos...`);
                // await api.createTask({ text: taskText, completed: false, userId: currentUser.id });
                // Recargar lista de tareas o añadir la nueva al DOM
              }</CODE_BLOCK>
            -->
          </div>
        </div>
      </div>
      
      <!-- Actividad y Estado de Áreas -->
      <div class="grid grid-cols-3" style="margin-top: 20px;">
        <div class="card">
          <div class="card-header">
            <!--
              SECCIÓN ACTIVIDAD RECIENTE:
              Esta lista mostraría eventos recientes del sistema (solicitudes aprobadas, nuevos clientes, etc.).
              Estos datos se cargarían desde un log de actividad o tabla similar en la BD.
              (READ operación principal)
            -->
            <h2 class="card-title">Actividad Reciente</h2>
          </div>
          <div class="card-content">
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-icon">
                  <i class="fas fa-check"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">Solicitud de material aprobada</div>
                  <div class="activity-time">Hace 30 minutos</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon">
                  <i class="fas fa-plus"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">Nuevo cliente agregado</div>
                  <div class="activity-time">Hace 2 horas</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">Cotización #1234 generada</div>
                  <div class="activity-time">Hace 3 horas</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon">
                  <i class="fas fa-dolly"></i>
                </div>
                <div class="activity-content">
                  <div class="activity-title">Actualización de inventario</div>
                  <div class="activity-time">Hace 5 horas</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card" style="grid-column: span 2;">
          <div class="card-header">
            <!--
              SECCIÓN ESTADO DE ÁREAS:
              El estado de las áreas (producción, ventas, etc.) y la posibilidad de "bloquear el flujo" sugiere
              que esta información se gestionaría y actualizaría en la BD.
              - Cargar estado inicial de áreas (READ)
              - Cambiar estado de bloqueo (UPDATE)
              La lista de áreas en sí también podría cargarse dinámicamente desde la BD.
            -->

            <h2 class="card-title">Panel de Estado de Áreas</h2>
            <button class="area-lock-btn" id="areaLockBtn">
              <i class="fas fa-lock-open"></i> <span id="areaLockBtnText">Bloquear Flujo</span>
            </button>
          </div>
          <div class="card-content">
            <div class="area-states" id="areaStates">
              <!-- Las áreas se generarán con JavaScript -->
              <!--
                <CODE_BLOCK>
                // Placeholder para función que carga estado de áreas
                async function loadAreaStates() {
                  console.log("Cargando estado de áreas desde la base de datos...");
                  // const areaData = await api.getAreaStates();
                  // Renderizar #areaStates
                }

                // Placeholder para función que actualiza estado de bloqueo
                async function updateAreaLockStatus(isLocked) {
                  console.log(`Actualizando estado de bloqueo en la base de datos a: ${isLocked}`);
                  // await api.updateSystemLockStatus(isLocked);</CODE_BLOCK>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Solicitudes de Material -->
      <div class="grid grid-cols-1" style="margin-top: 20px;">
        <div class="card">
          <!--
            SECCIÓN SOLICITUDES DE MATERIAL:
            Esta tabla muestra solicitudes recientes. Los datos de las solicitudes se cargarían desde la BD (READ).
            El enlace "Ver todas" lleva a otra página que listaría todas las solicitudes, también desde la BD.
            Las columnas (Folio, Fecha, Solicitante, Descripción, Estado) son atributos de la tabla de solicitudes en la BD.
          -->

          <div class="card-header">
            <h2 class="card-title">Solicitudes de Material Recientes</h2>
            <a href="solicitud-material.html" class="card-link">Ver todas</a>
          </div>
          <div class="card-content">
            <table class="material-table">
              <thead>
                <tr>
                  <th>Folio</th>
                  <th>Fecha</th>
                  <th>Solicitante</th>
                  <th>Descripción</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody id="materialRequestsTable">
                <!-- Las solicitudes se generarán con JavaScript -->
                <!--
                  <CODE_BLOCK>
                  // Placeholder para función que carga solicitudes de material
                  async function loadRecentMaterialRequests() {
                    console.log("Cargando solicitudes de material recientes desde la base de datos...");
                    // const requests = await api.getRecentMaterialRequests(5); // Obtener, por ejemplo, las últimas 5
                    // Renderizar las filas en #materialRequestsTable
                  }</CODE_BLOCK>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="js/page-transitions.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/tasks.js"></script>
  <script src="js/areas.js"></script>
  <script src="js/material-requests.js"></script>
  <script src="js/main.js"></script>
</body>
</html>